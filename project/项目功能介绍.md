# 酒店管理系统 - 详细功能介绍

## 📋 项目概述

本系统是一个基于 **SSM 框架**（Spring + Spring MVC + MyBatis）开发的酒店管理系统，采用前后端分离的设计思想，提供管理员后台和用户前台两套完整的功能模块。系统使用 Layui 前端框架和 Font Awesome 图标库，界面美观、操作便捷。

### 技术栈
- **后端框架**: Spring 5.3.23 + Spring MVC + MyBatis 3.5.11
- **前端框架**: Layui + Font Awesome 6.4.0
- **数据库**: MySQL 8.0.33
- **服务器**: Tomcat 8.5+
- **构建工具**: Maven 3.6+
- **开发语言**: Java 8

---

## 🎯 系统架构

### 数据模型（4个核心实体）

#### 1. User（用户表）
- **用户ID** (userId): 主键
- **用户名** (userName): 登录账号
- **密码** (password): 加密存储
- **真实姓名** (realName): 用户真实姓名
- **手机号** (phone): 联系方式
- **邮箱** (email): 电子邮箱
- **头像** (avatar): 用户头像URL
- **用户类型** (userType): 0-普通会员，1-管理员
- **状态** (status): 0-禁用，1-正常
- **创建时间** (createTime)
- **更新时间** (updateTime)
- **备注** (remark)


#### 2. RoomCategory（房间分类表）
- **分类ID** (categoryId): 主键
- **分类名称** (categoryName): 如"豪华套房"、"标准间"
- **描述** (description): 分类详细描述
- **最低价格** (priceMin): 该分类最低价格
- **最高价格** (priceMax): 该分类最高价格
- **封面图片** (coverImg): 分类展示图片URL
- **排序** (sort): 显示顺序
- **状态** (status): 启用/禁用
- **创建时间** (createTime)
- **更新时间** (updateTime)

#### 3. RoomInfo（房间信息表）
- **房间ID** (roomId): 主键
- **分类ID** (categoryId): 关联房间分类
- **房间号** (roomNo): 如"101"、"202"
- **面积** (area): 房间面积（平方米）
- **床型** (bedType): 如"大床"、"双床"
- **价格** (price): 房间单价（元/天）
- **设施** (facilities): 房间设施描述
- **封面图片** (coverImg): 房间主图
- **详情图片** (detailImgs): 多张详情图，逗号分隔
- **房间状态** (roomStatus): 0-可预订，1-维护中，2-已入住
- **创建时间** (createTime)
- **更新时间** (updateTime)

#### 4. Order（订单表）
- **订单ID** (orderId): 主键
- **订单号** (orderNo): 唯一订单编号
- **用户ID** (userId): 下单用户
- **房间ID** (roomId): 预订房间
- **分类ID** (categoryId): 房间分类
- **入住人姓名** (guestName): 实际入住人
- **联系电话** (phone): 联系方式
- **入住日期** (checkInDate): 预计入住时间
- **退房日期** (checkOutDate): 预计退房时间
- **入住天数** (stayDays): 计算天数
- **房间单价** (roomPrice): 预订时的价格
- **订单总价** (totalPrice): 总金额
- **订单状态** (orderStatus): 0-待确认，1-已确认，2-已入住，3-已完成，4-已取消
- **特殊要求** (specialRequests): 客户备注
- **取消原因** (cancelReason): 取消订单原因
- **创建时间** (createTime)
- **更新时间** (updateTime)

---

## 🔐 一、用户认证与权限管理

### 1.1 管理员登录系统
**访问路径**: `/admin/login`

**功能描述**:
- 管理员使用用户名和密码登录后台管理系统
- 登录成功后创建 Session，保存管理员信息
- 使用拦截器验证管理员身份（userType = 1）
- 登录页面采用全屏背景图设计，界面美观

**默认管理员账号**:
- 用户名: `admin`
- 密码: `123456`

**技术实现**:
- Controller: `AdminLoginController.java`
- 拦截器: `AdminLoginInterceptor.java`
- 视图: `views/admin/login.jsp`


### 1.2 用户端登录/注册
**访问路径**: `/user/login` 和 `/user/register`

**功能描述**:
- 普通用户注册账号（userType = 0）
- 用户登录后可浏览房间、预订房间、查看订单
- 使用拦截器验证用户登录状态
- 支持记住密码功能

**技术实现**:
- Controller: `UserLoginController.java`
- 拦截器: `UserLoginInterceptor.java`
- 视图: `views/user/login.jsp`, `views/user/register.jsp`

### 1.3 权限控制
**实现方式**:
- **管理员拦截器**: 拦截 `/admin/**` 路径，验证 Session 中是否有管理员信息
- **用户拦截器**: 拦截 `/user/**` 路径（除登录注册外），验证用户登录状态
- **白名单机制**: 登录、注册、静态资源等路径不拦截

---

## 🏨 二、管理员后台功能

### 2.1 后台首页（Dashboard）
**访问路径**: `/admin/index`

**功能描述**:
- **顶部导航栏**: 显示系统Logo、管理员信息、退出登录
- **左侧菜单栏**: 树形菜单结构，包含所有功能模块
- **主内容区**: 选项卡式多页面管理，支持同时打开多个功能页面
- **首页统计**: 实时显示关键业务数据

**首页统计卡片**:
1. **总房间数**: 系统中所有房间的数量
2. **今日入住**: 当天入住的订单数
3. **待审核订单**: 状态为"待确认"的订单数
4. **今日收入**: 当天完成订单的总收入

**快捷操作**:
- 添加房间
- 查看订单
- 用户管理

**技术特点**:
- 使用 iframe 实现选项卡内容加载
- 智能高度自适应，避免双滚动条
- 支持选项卡关闭（首页除外）
- 渐变色主题，翠绿色系

**技术实现**:
- Controller: `AdminLoginController.java` - `index()` 方法
- 视图: `views/admin/index.jsp`

---


### 2.2 房间分类管理
**访问路径**: `/admin/room/category/list`

#### 2.2.1 分类列表
**功能描述**:
- 展示所有房间分类信息（表格形式）
- 支持按分类名称、价格区间搜索
- 分页显示，每页可自定义显示数量
- 显示分类封面图片、名称、描述、价格区间

**操作功能**:
- **新增分类**: 跳转到分类表单页面
- **编辑分类**: 修改分类信息
- **删除分类**: 删除指定分类（需确认）

**技术实现**:
- Controller: `RoomCategoryController.java` - `list()` 方法
- Service: `RoomCategoryService.java`
- 视图: `views/admin/room/category_list.jsp`

#### 2.2.2 新增/编辑分类
**访问路径**: `/admin/room/category/add` 或 `/admin/room/category/edit/{id}`

**表单字段**:
1. **分类名称** (必填): 如"豪华套房"、"标准间"
2. **描述**: 分类详细介绍
3. **最低价格**: 该分类房间的最低价格
4. **最高价格**: 该分类房间的最高价格
5. **封面图片**: 上传分类展示图片

**图片上传功能**:
- 点击上传区域选择图片文件
- 支持 jpg、png、gif 等格式
- 最大文件大小: 50MB
- 上传后实时预览
- 支持删除已上传图片
- 图片存储路径: `C:\Users\{用户名}\hotel-uploads\categories\`
- 访问URL: `/uploads/categories/{文件名}`

**技术实现**:
- Controller: `RoomCategoryController.java`
  - `add()`: 显示新增表单
  - `save()`: 保存新分类
  - `edit()`: 显示编辑表单
  - `update()`: 更新分类信息
  - `uploadImage()`: 处理图片上传
  - `deleteImage()`: 删除图片文件
- 视图: `views/admin/room/category_form.jsp`

---

### 2.3 房间信息管理
**访问路径**: `/admin/room/list`

#### 2.3.1 房间列表
**功能描述**:
- 展示所有房间信息（卡片式布局）
- 支持多条件搜索：
  - 房间号
  - 房间分类
  - 价格区间
  - 房间状态（可预订/维护中/已入住）
- 分页显示
- 显示房间封面图、房间号、分类、价格、状态

**房间状态标识**:
- 🟢 **可预订** (status=0): 绿色标签
- 🟡 **维护中** (status=1): 黄色标签
- 🔴 **已入住** (status=2): 红色标签

**操作功能**:
- **新增房间**: 添加新房间
- **编辑房间**: 修改房间信息
- **删除房间**: 删除指定房间
- **查看详情**: 查看房间完整信息

**技术实现**:
- Controller: `RoomInfoController.java` - `list()` 方法
- Service: `RoomInfoService.java`
- 视图: `views/admin/room/list.jsp`


#### 2.3.2 新增/编辑房间
**访问路径**: `/admin/room/add` 或 `/admin/room/edit/{id}`

**表单字段**:
1. **房间号** (必填): 如"101"、"202"
2. **房间分类** (必填): 下拉选择已有分类
3. **面积**: 房间面积（平方米）
4. **床型**: 如"大床"、"双床"、"单床"
5. **价格** (必填): 房间单价（元/天）
6. **设施**: 房间设施描述，如"空调、电视、WiFi、独立卫浴"
7. **房间状态**: 可预订/维护中/已入住
8. **封面图片**: 房间主图
9. **详情图片**: 可上传多张房间图片

**图片上传功能**:
- 支持单张封面图和多张详情图
- 图片存储路径: `C:\Users\{用户名}\hotel-uploads\rooms\`
- 访问URL: `/uploads/rooms/{文件名}`
- 详情图片以逗号分隔存储在数据库

**技术实现**:
- Controller: `RoomInfoController.java`
  - `add()`: 显示新增表单
  - `save()`: 保存新房间
  - `edit()`: 显示编辑表单
  - `update()`: 更新房间信息
  - `uploadImage()`: 处理图片上传
  - `deleteImage()`: 删除图片
- 视图: `views/admin/room/form.jsp`

---

### 2.4 订单管理
**访问路径**: `/admin/order/list`

#### 2.4.1 订单列表
**功能描述**:
- 展示所有订单信息（表格形式）
- 支持多条件搜索：
  - 订单号
  - 入住人姓名
  - 联系电话
  - 用户名
  - 订单状态
- 分页显示
- 显示订单号、用户、房间、入住时间、总价、状态

**订单状态**:
- 🟡 **待确认** (status=0): 用户刚下单，等待管理员确认
- 🔵 **已确认** (status=1): 管理员已确认，等待入住
- 🟢 **已入住** (status=2): 客户已办理入住
- ✅ **已完成** (status=3): 客户已退房，订单完成
- 🔴 **已取消** (status=4): 订单被取消

**操作功能**:
- **查看详情**: 查看订单完整信息
- **确认订单**: 将"待确认"订单改为"已确认"
- **确认入住**: 将"已确认"订单改为"已入住"，同时更新房间状态
- **确认完成**: 将"已入住"订单改为"已完成"，释放房间
- **取消订单**: 取消订单，需填写取消原因
- **删除订单**: 删除已完成或已取消的订单
- **批量操作**: 支持批量确认、入住、完成、删除

**技术实现**:
- Controller: `OrderController.java`
  - `list()`: 订单列表
  - `detail()`: 订单详情
  - `confirmOrder()`: 确认订单
  - `checkInOrder()`: 确认入住
  - `completeOrder()`: 确认完成
  - `cancelOrder()`: 取消订单
  - `deleteOrder()`: 删除订单
  - `batchOperation()`: 批量操作
- Service: `OrderService.java`
- 视图: `views/admin/order/list.jsp`, `views/admin/order/detail.jsp`


#### 2.4.2 订单详情
**访问路径**: `/admin/order/detail/{orderId}`

**显示信息**:
- **订单基本信息**: 订单号、创建时间、订单状态
- **用户信息**: 用户名、真实姓名、联系电话
- **房间信息**: 房间号、房间分类、床型、价格
- **入住信息**: 入住人姓名、联系电话、入住日期、退房日期、入住天数
- **费用信息**: 房间单价、订单总价
- **其他信息**: 特殊要求、取消原因（如有）

**操作按钮**:
- 根据订单状态显示相应操作按钮
- 状态流转: 待确认 → 已确认 → 已入住 → 已完成

---

### 2.5 统计报表

#### 2.5.1 入住统计
**访问路径**: `/admin/statistics/occupancy`

**功能描述**:
- 统计不同时间段的房间入住情况
- 按房间分类统计入住率
- 可视化图表展示入住趋势

**统计维度**:
- **时间周期**: 
  - 今日
  - 最近7天
  - 最近30天
  - 最近一年
- **统计指标**:
  - 总房间数
  - 入住率（%）
  - 订单数量
  - 总收入

**数据展示**:
1. **分类统计表格**: 按房间分类显示入住率和收入
2. **入住率趋势图**: 折线图展示入住率变化
3. **总体统计**: 汇总所有分类的数据

**计算逻辑**:
- 入住率 = (已入住房间天数 / 总房间天数) × 100%
- 考虑订单的入住时间与统计时间段的交集
- 只统计"已入住"和"已完成"状态的订单

**技术实现**:
- Controller: `StatisticsController.java`
  - `occupancy()`: 显示入住统计页面
  - `getOccupancyData()`: 获取统计数据（JSON）
- 视图: `views/admin/statistics/occupancy.jsp`

#### 2.5.2 收入统计
**访问路径**: `/admin/statistics/revenue`

**功能描述**:
- 统计不同时间段的酒店收入情况
- 按房间分类统计收入占比
- 可视化图表展示收入趋势

**统计维度**:
- **时间周期**: 今日、最近7天、最近30天、最近一年
- **统计指标**:
  - 总收入
  - 订单数量
  - 分类收入占比
  - 平均订单金额

**数据展示**:
1. **分类收入表格**: 按房间分类显示收入和订单数
2. **收入趋势图**: 折线图展示收入变化
3. **收入占比饼图**: 各分类收入占比
4. **总体统计**: 汇总数据

**计算逻辑**:
- 只统计"已完成"状态的订单
- 收入 = 订单总价之和
- 占比 = (分类收入 / 总收入) × 100%

**技术实现**:
- Controller: `StatisticsController.java`
  - `revenue()`: 显示收入统计页面
  - `getRevenueData()`: 获取统计数据（JSON）
- 视图: `views/admin/statistics/revenue.jsp`


---

### 2.6 会员管理
**访问路径**: `/admin/user/list`

#### 2.6.1 会员列表
**功能描述**:
- 展示所有普通用户（userType=0）信息
- 支持多条件搜索：
  - 用户名
  - 真实姓名
  - 手机号
  - 账号状态（正常/禁用）
- 分页显示
- 显示用户名、真实姓名、手机号、邮箱、状态、注册时间

**操作功能**:
- **新增会员**: 手动添加会员账号
- **编辑会员**: 修改会员信息
- **删除会员**: 删除会员账号
- **重置密码**: 将密码重置为默认密码（123456）
- **启用/禁用**: 控制账号状态

**技术实现**:
- Controller: `UserController.java`
  - `list()`: 会员列表
  - `add()`: 显示新增表单
  - `save()`: 保存新会员
  - `edit()`: 显示编辑表单
  - `update()`: 更新会员信息
  - `delete()`: 删除会员
  - `resetPassword()`: 重置密码
- Service: `UserService.java`
- 视图: `views/admin/user/list.jsp`, `views/admin/user/form.jsp`

---

### 2.7 系统管理

#### 2.7.1 管理员管理
**访问路径**: `/admin/system/admin/list`

**功能描述**:
- 管理系统管理员账号（userType=1）
- 支持搜索、新增、编辑、删除管理员
- 管理员权限控制

**操作功能**:
- **新增管理员**: 创建新的管理员账号
- **编辑管理员**: 修改管理员信息
- **删除管理员**: 删除管理员账号（不能删除自己）
- **重置密码**: 重置管理员密码

**技术实现**:
- Controller: `AdminUserController.java`
- 视图: `views/admin/system/admin_list.jsp`, `views/admin/system/admin_form.jsp`

---

### 2.8 个人中心
**访问路径**: `/admin/profile`

**功能模块**:

#### 2.8.1 个人信息
- 查看和编辑管理员个人信息
- 修改真实姓名、手机号、邮箱
- 上传头像

#### 2.8.2 修改密码
**访问路径**: `/admin/profile/password`

- 输入原密码
- 设置新密码
- 确认新密码
- 密码强度验证

#### 2.8.3 操作日志
**访问路径**: `/admin/profile/logs`

- 查看管理员的操作记录
- 记录登录时间、操作内容
- 支持按时间筛选

**技术实现**:
- Controller: `ProfileController.java`
- 视图: 
  - `views/admin/profile.jsp`
  - `views/admin/profile_edit.jsp`
  - `views/admin/profile_password.jsp`
  - `views/admin/profile_logs.jsp`

---


## 👥 三、用户前台功能

### 3.1 用户首页
**访问路径**: `/user/index`

**功能描述**:
- 展示酒店介绍和特色服务
- 显示热门房间推荐
- 快速搜索房间功能
- 用户导航栏（登录后显示用户信息）

**技术实现**:
- Controller: `UserRoomController.java`
- 视图: `views/user/index.jsp`, `views/user/header.jsp`

---

### 3.2 房间浏览
**访问路径**: `/user/rooms`

**功能描述**:
- 展示所有可预订的房间（卡片式布局）
- 支持多条件筛选：
  - 房间号
  - 房间分类
  - 价格区间
- 显示房间图片、房间号、价格、设施
- 点击房间卡片查看详情

**房间卡片信息**:
- 房间封面图
- 房间号
- 房间分类
- 价格（元/天）
- 床型
- 房间状态
- "查看详情"按钮

**技术实现**:
- Controller: `UserRoomController.java` - `rooms()` 方法
- Service: `RoomInfoService.java`
- 视图: `views/user/rooms.jsp`

---

### 3.3 房间详情
**访问路径**: `/user/room/{roomId}`

**功能描述**:
- 展示房间完整信息
- 显示房间图片轮播（封面图+详情图）
- 显示房间详细参数
- 提供"立即预订"按钮

**显示信息**:
- **基本信息**: 房间号、分类、价格
- **房间参数**: 面积、床型、房间状态
- **设施服务**: 详细设施列表
- **图片展示**: 多图轮播
- **预订按钮**: 跳转到预订页面

**技术实现**:
- Controller: `UserRoomController.java` - `roomDetail()` 方法
- 视图: `views/user/room_detail.jsp`

---

### 3.4 房间预订
**访问路径**: `/user/book/{roomId}`

**功能描述**:
- 填写预订信息
- 选择入住和退房日期
- 自动计算入住天数和总价
- 提交订单

**预订表单字段**:
1. **入住人姓名** (必填): 实际入住人姓名
2. **联系电话** (必填): 联系方式
3. **入住日期** (必填): 预计入住时间
4. **退房日期** (必填): 预计退房时间
5. **特殊要求** (可选): 客户备注，如"需要婴儿床"

**价格计算**:
- 入住天数 = 退房日期 - 入住日期
- 订单总价 = 房间单价 × 入住天数
- 实时显示计算结果

**订单生成**:
- 生成唯一订单号（格式：ORDER + 时间戳）
- 订单状态默认为"待确认"
- 保存订单信息到数据库
- 跳转到"我的订单"页面

**技术实现**:
- Controller: `UserRoomController.java`
  - `bookPage()`: 显示预订页面
  - `submitOrder()`: 提交订单
- Service: `OrderService.java`
- 视图: `views/user/book.jsp`


---

### 3.5 我的订单
**访问路径**: `/user/orders`

**功能描述**:
- 查看当前用户的所有订单
- 按订单状态筛选
- 查看订单详情
- 取消订单（待确认/已确认状态）

**订单列表显示**:
- 订单号
- 房间信息（房间号、分类）
- 入住时间
- 订单总价
- 订单状态
- 操作按钮

**订单状态说明**:
- 🟡 **待确认**: 等待酒店确认，可以取消
- 🔵 **已确认**: 酒店已确认，可以取消（可能收取费用）
- 🟢 **已入住**: 已办理入住，不可取消
- ✅ **已完成**: 已退房，订单完成
- 🔴 **已取消**: 订单已取消

**操作功能**:
- **查看详情**: 查看订单完整信息
- **取消订单**: 取消待确认或已确认的订单
- **再次预订**: 基于历史订单快速预订

**技术实现**:
- Controller: `UserRoomController.java`
  - `myOrders()`: 我的订单列表
  - `orderDetail()`: 订单详情
  - `cancelOrder()`: 取消订单
- Service: `OrderService.java`
- 视图: `views/user/orders.jsp`

---

### 3.6 个人中心
**访问路径**: `/user/profile`

**功能模块**:

#### 3.6.1 个人信息
- 查看和编辑个人资料
- 修改真实姓名、手机号、邮箱
- 上传头像

**头像上传**:
- 点击头像区域上传图片
- 支持 jpg、png、gif 格式
- 最大 5MB
- 图片存储路径: `C:\Users\{用户名}\hotel-uploads\avatars\`
- 访问URL: `/uploads/avatars/{文件名}`

#### 3.6.2 修改密码
- 输入原密码验证
- 设置新密码
- 确认新密码
- 密码强度提示

#### 3.6.3 我的订单
- 快速跳转到订单列表
- 显示订单统计信息

**技术实现**:
- Controller: `UserRoomController.java`
  - `profile()`: 个人中心首页
  - `editProfile()`: 编辑个人信息
  - `updateProfile()`: 更新个人信息
  - `uploadAvatar()`: 上传头像
  - `changePassword()`: 修改密码
- 视图: `views/user/profile.jsp`

---

## 🔧 四、系统技术特性

### 4.1 文件上传功能

**上传配置**:
- 使用 Spring MVC 的 `CommonsMultipartResolver`
- 最大文件大小: 10MB（可配置）
- 编码: UTF-8

**存储策略**:
- **存储位置**: 外部目录（用户家目录下）
  - Windows: `C:\Users\{用户名}\hotel-uploads\`
  - Linux/Mac: `~/hotel-uploads/`
- **目录结构**:
  ```
  hotel-uploads/
  ├── categories/    # 房间分类图片
  ├── rooms/         # 房间图片
  └── avatars/       # 用户头像
  ```

**文件命名**:
- 格式: `时间戳_UUID.扩展名`
- 示例: `1704067200000_a1b2c3d4e5f6.jpg`
- 避免文件名冲突

**访问映射**:
- Spring MVC 配置: `<mvc:resources mapping="/uploads/**" location="file:${upload.path}/"/>`
- 访问URL: `http://域名/项目名/uploads/分类/文件名`

**技术实现**:
- 配置文件: `src/main/resources/spring-mvc.xml`
- 上传路径配置: `src/main/resources/db.properties` - `upload.path`


---

### 4.2 拦截器机制

**管理员拦截器** (`AdminLoginInterceptor.java`):
- **拦截路径**: `/admin/**`
- **放行路径**: `/admin/login`, `/admin/doLogin`
- **验证逻辑**: 
  - 检查 Session 中是否有 `adminUser`
  - 验证 `userType == 1`（管理员）
  - 未登录或非管理员重定向到登录页

**用户拦截器** (`UserLoginInterceptor.java`):
- **拦截路径**: `/user/**`
- **放行路径**: `/user/login`, `/user/register`, `/user/doLogin`, `/user/doRegister`
- **验证逻辑**:
  - 检查 Session 中是否有 `user`
  - 验证 `userType == 0`（普通用户）
  - 未登录重定向到登录页

**配置位置**: `src/main/resources/spring-mvc.xml`

---

### 4.3 数据库连接池

**使用 Druid 连接池**:
- 高性能数据库连接池
- 支持监控统计
- 防SQL注入

**配置信息** (`db.properties`):
```properties
jdbc.driver=com.mysql.cj.jdbc.Driver
jdbc.url=jdbc:mysql://localhost:3306/ssmhotel?useUnicode=true&characterEncoding=UTF-8&serverTimezone=Asia/Shanghai&useSSL=false
jdbc.username=root
jdbc.password=123456
```

**连接池配置** (`applicationContext.xml`):
- 初始连接数: 5
- 最大连接数: 20
- 最小空闲连接数: 5
- 最大等待时间: 60000ms

---

### 4.4 日志系统

**使用 Logback**:
- 日志框架: SLF4J + Logback
- 日志级别: DEBUG, INFO, WARN, ERROR
- 日志输出: 控制台 + 文件

**日志配置** (`logback.xml`):
- **控制台输出**: 彩色日志，便于开发调试
- **文件输出**: 
  - 位置: `logs/hotel.log`
  - 滚动策略: 按日期和大小滚动
  - 保留天数: 30天
  - 单文件最大: 10MB

**日志格式**:
```
2026-01-17 10:30:45.123 [http-nio-8080-exec-1] INFO  c.h.controller.AdminLoginController - 登录成功，用户: admin
```

---

### 4.5 前端技术

#### 4.5.1 Layui 框架
- **版本**: 2.x
- **组件使用**:
  - `layui.form`: 表单组件
  - `layui.table`: 表格组件
  - `layui.layer`: 弹层组件
  - `layui.upload`: 文件上传组件
  - `layui.laydate`: 日期选择组件
  - `layui.element`: 元素操作

#### 4.5.2 Font Awesome 图标
- **版本**: 6.4.0
- **使用方式**: CDN 引入
- **图标数量**: 2000+ 精美图标
- **使用示例**:
  - `<i class="fas fa-hotel"></i>` - 酒店图标
  - `<i class="fas fa-bed"></i>` - 床铺图标
  - `<i class="fas fa-user"></i>` - 用户图标

#### 4.5.3 界面设计特点
- **主题色**: 翠绿色系（#009688, #5FB878）
- **设计风格**: 现代化、扁平化
- **响应式**: 支持PC和移动端
- **动画效果**: 平滑过渡、悬停效果
- **渐变背景**: 多处使用渐变色增强视觉效果

---

### 4.6 安全机制

#### 4.6.1 密码安全
- 密码存储: 建议使用加密存储（当前为明文，生产环境需改进）
- 密码强度: 建议添加密码强度验证
- 密码重置: 支持管理员重置用户密码

#### 4.6.2 Session 管理
- Session 超时: 30分钟（可配置）
- Session 验证: 每次请求验证登录状态
- 退出登录: 清除 Session

#### 4.6.3 SQL 注入防护
- 使用 MyBatis 参数化查询
- 避免字符串拼接 SQL
- 使用 `#{}` 而非 `${}`

#### 4.6.4 XSS 防护
- 前端输入验证
- 后端数据过滤
- JSP 输出转义

---


## 📊 五、数据库设计

### 5.1 数据库名称
`ssmhotel` 或 `260112ssmhotel`

### 5.2 数据表结构

#### 表1: user（用户表）
```sql
CREATE TABLE `user` (
  `user_id` BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '用户ID',
  `user_name` VARCHAR(50) NOT NULL UNIQUE COMMENT '用户名',
  `password` VARCHAR(100) NOT NULL COMMENT '密码',
  `real_name` VARCHAR(50) COMMENT '真实姓名',
  `phone` VARCHAR(20) COMMENT '手机号',
  `email` VARCHAR(100) COMMENT '邮箱',
  `avatar` VARCHAR(255) COMMENT '头像URL',
  `user_type` TINYINT DEFAULT 0 COMMENT '用户类型：0-普通用户，1-管理员',
  `status` TINYINT DEFAULT 1 COMMENT '状态：0-禁用，1-正常',
  `create_time` DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `update_time` DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  `remark` VARCHAR(500) COMMENT '备注'
) COMMENT='用户表';
```

#### 表2: room_category（房间分类表）
```sql
CREATE TABLE `room_category` (
  `category_id` BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '分类ID',
  `category_name` VARCHAR(50) NOT NULL COMMENT '分类名称',
  `description` TEXT COMMENT '描述',
  `price_min` DECIMAL(10,2) COMMENT '最低价格',
  `price_max` DECIMAL(10,2) COMMENT '最高价格',
  `cover_img` VARCHAR(255) COMMENT '封面图片',
  `sort` INT DEFAULT 0 COMMENT '排序',
  `status` TINYINT DEFAULT 1 COMMENT '状态：0-禁用，1-启用',
  `create_time` DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `update_time` DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  `remark` VARCHAR(500) COMMENT '备注'
) COMMENT='房间分类表';
```

#### 表3: room_info（房间信息表）
```sql
CREATE TABLE `room_info` (
  `room_id` BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '房间ID',
  `category_id` BIGINT NOT NULL COMMENT '分类ID',
  `room_no` VARCHAR(20) NOT NULL UNIQUE COMMENT '房间号',
  `area` DECIMAL(10,2) COMMENT '面积（平方米）',
  `bed_type` VARCHAR(50) COMMENT '床型',
  `price` DECIMAL(10,2) NOT NULL COMMENT '价格（元/天）',
  `facilities` TEXT COMMENT '设施',
  `cover_img` VARCHAR(255) COMMENT '封面图片',
  `detail_imgs` TEXT COMMENT '详情图片（逗号分隔）',
  `room_status` TINYINT DEFAULT 0 COMMENT '房间状态：0-可预订，1-维护中，2-已入住',
  `create_time` DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `update_time` DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  `remark` VARCHAR(500) COMMENT '备注',
  FOREIGN KEY (`category_id`) REFERENCES `room_category`(`category_id`)
) COMMENT='房间信息表';
```

#### 表4: orders（订单表）
```sql
CREATE TABLE `orders` (
  `order_id` BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '订单ID',
  `order_no` VARCHAR(50) NOT NULL UNIQUE COMMENT '订单号',
  `user_id` BIGINT NOT NULL COMMENT '用户ID',
  `room_id` BIGINT NOT NULL COMMENT '房间ID',
  `category_id` BIGINT COMMENT '房间分类ID',
  `guest_name` VARCHAR(50) NOT NULL COMMENT '入住人姓名',
  `phone` VARCHAR(20) NOT NULL COMMENT '联系电话',
  `check_in_date` DATE NOT NULL COMMENT '入住日期',
  `check_out_date` DATE NOT NULL COMMENT '退房日期',
  `stay_days` INT NOT NULL COMMENT '入住天数',
  `room_price` DECIMAL(10,2) NOT NULL COMMENT '房间单价',
  `total_price` DECIMAL(10,2) NOT NULL COMMENT '订单总价',
  `order_status` TINYINT DEFAULT 0 COMMENT '订单状态：0-待确认，1-已确认，2-已入住，3-已完成，4-已取消',
  `special_requests` TEXT COMMENT '特殊要求',
  `cancel_reason` VARCHAR(500) COMMENT '取消原因',
  `create_time` DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `update_time` DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  `remark` VARCHAR(500) COMMENT '备注',
  FOREIGN KEY (`user_id`) REFERENCES `user`(`user_id`),
  FOREIGN KEY (`room_id`) REFERENCES `room_info`(`room_id`),
  FOREIGN KEY (`category_id`) REFERENCES `room_category`(`category_id`)
) COMMENT='订单表';
```

### 5.3 索引设计
- **主键索引**: 所有表的主键自动创建索引
- **唯一索引**: 
  - `user.user_name`
  - `room_info.room_no`
  - `orders.order_no`
- **外键索引**: 自动创建
- **查询索引**: 
  - `orders.user_id`
  - `orders.order_status`
  - `orders.create_time`
  - `room_info.category_id`
  - `room_info.room_status`

---


## 🚀 六、项目部署与运行

### 6.1 环境要求
- **JDK**: 1.8 或以上
- **MySQL**: 5.7 或以上（推荐 8.0）
- **Maven**: 3.6 或以上
- **Tomcat**: 8.5 或以上
- **IDE**: IntelliJ IDEA 或 Eclipse（推荐 IDEA）

### 6.2 部署步骤

#### 步骤1: 数据库准备
```bash
# 1. 创建数据库
CREATE DATABASE ssmhotel CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

# 2. 导入数据库脚本
mysql -u root -p ssmhotel < 260112ssmhotel.sql
```

#### 步骤2: 配置数据库连接
编辑 `src/main/resources/db.properties`:
```properties
jdbc.url=jdbc:mysql://localhost:3306/ssmhotel?useUnicode=true&characterEncoding=UTF-8&serverTimezone=Asia/Shanghai&useSSL=false
jdbc.username=root
jdbc.password=你的密码
```

#### 步骤3: 配置上传路径（可选）
编辑 `src/main/resources/db.properties`:
```properties
# 默认使用用户家目录
upload.path=${user.home}/hotel-uploads

# 或指定绝对路径
# upload.path=D:/hotel-uploads
```

#### 步骤4: 编译项目
```bash
mvn clean compile
```

#### 步骤5: 打包项目
```bash
mvn clean package
```

### 6.3 运行方式

#### 方式1: Maven Tomcat 插件（推荐开发）
```bash
mvn tomcat7:run
```
访问: `http://localhost:8080/admin/login`

#### 方式2: IDEA 配置 Tomcat（推荐）
1. Run → Edit Configurations → + → Tomcat Server → Local
2. 配置 Tomcat 安装路径
3. Deployment 选项卡 → + → Artifact → 选择 `war exploded`
4. Application context 设置为 `/` 或 `/hotel`
5. 点击运行

访问: `http://localhost:8080/admin/login`

#### 方式3: 外部 Tomcat 部署
1. 将 `target/hotel-management-system-1.0-SNAPSHOT.war` 复制到 Tomcat 的 `webapps` 目录
2. 启动 Tomcat: `bin/startup.bat` (Windows) 或 `bin/startup.sh` (Linux)
3. 访问: `http://localhost:8080/hotel-management-system-1.0-SNAPSHOT/admin/login`

### 6.4 默认账号

#### 管理员账号
- 用户名: `admin`
- 密码: `123456`
- 访问地址: `http://localhost:8080/admin/login`

#### 测试用户账号
- 用户名: `user`
- 密码: `123456`
- 访问地址: `http://localhost:8080/user/login`

### 6.5 常见问题

#### 问题1: 404 错误
- 检查 Application context 配置
- 确认项目是否正确部署
- 查看 Tomcat 启动日志

#### 问题2: 数据库连接失败
- 检查 MySQL 服务是否启动
- 验证数据库连接信息
- 确认数据库已创建

#### 问题3: 图片上传失败
- 检查上传目录是否有写权限
- 确认 `upload.path` 配置正确
- 查看日志文件 `logs/hotel.log`

#### 问题4: 静态资源加载失败
- 检查 `spring-mvc.xml` 中的静态资源映射
- 确认 Layui 文件是否存在
- 清除浏览器缓存

---

## 📈 七、系统特色与亮点

### 7.1 界面设计
✅ **现代化UI**: 采用 Layui 框架，界面简洁美观  
✅ **翠绿主题**: 统一的翠绿色系，视觉舒适  
✅ **渐变效果**: 多处使用渐变色，增强视觉层次  
✅ **响应式设计**: 支持PC和移动端访问  
✅ **图标丰富**: Font Awesome 6.4.0，2000+ 精美图标

### 7.2 用户体验
✅ **选项卡管理**: 后台支持多页面同时打开  
✅ **智能高度**: iframe 自适应内容高度  
✅ **实时预览**: 图片上传后立即显示  
✅ **操作提示**: 所有操作都有友好的提示信息  
✅ **数据验证**: 前后端双重验证，确保数据准确

### 7.3 功能完善
✅ **权限控制**: 管理员和用户分离，权限清晰  
✅ **订单流程**: 完整的订单生命周期管理  
✅ **统计报表**: 可视化数据统计，支持多维度分析  
✅ **文件上传**: 支持图片上传，外部存储  
✅ **搜索筛选**: 多条件组合搜索，快速定位数据

### 7.4 代码质量
✅ **分层架构**: Controller-Service-Dao 清晰分层  
✅ **注解驱动**: 使用 Spring 注解，代码简洁  
✅ **日志记录**: 完善的日志系统，便于调试  
✅ **异常处理**: 统一异常处理机制  
✅ **代码规范**: 遵循 Java 编码规范

---


## 🔮 八、功能扩展建议

### 8.1 待开发功能
- [ ] 在线支付功能（支付宝、微信支付）
- [ ] 优惠券和促销活动管理
- [ ] 会员积分系统
- [ ] 房间评价和评分功能
- [ ] 短信通知功能
- [ ] 邮件通知功能
- [ ] 数据导出功能（Excel）
- [ ] 系统配置管理
- [ ] 操作日志记录
- [ ] 数据备份与恢复

### 8.2 性能优化建议
- [ ] 添加 Redis 缓存
- [ ] 数据库查询优化
- [ ] 图片压缩和CDN加速
- [ ] 前端资源压缩
- [ ] 接口响应时间优化
- [ ] 分页查询优化

### 8.3 安全增强建议
- [ ] 密码加密存储（BCrypt）
- [ ] 验证码功能
- [ ] 防止暴力破解
- [ ] HTTPS 支持
- [ ] CSRF 防护
- [ ] 敏感信息脱敏
- [ ] 操作权限细化

### 8.4 用户体验优化
- [ ] 房间实时库存显示
- [ ] 智能推荐系统
- [ ] 多语言支持
- [ ] 移动端APP
- [ ] 微信小程序
- [ ] 在线客服功能
- [ ] 消息推送功能

---

## 📚 九、项目文件结构

```
hotel-management-system/
├── src/
│   ├── main/
│   │   ├── java/
│   │   │   └── com/hotel/
│   │   │       ├── config/              # 配置类
│   │   │       │   ├── AdminLoginInterceptor.java
│   │   │       │   └── UserLoginInterceptor.java
│   │   │       ├── controller/          # 控制器
│   │   │       │   ├── AdminLoginController.java
│   │   │       │   ├── AdminUserController.java
│   │   │       │   ├── OrderController.java
│   │   │       │   ├── ProfileController.java
│   │   │       │   ├── RoomCategoryController.java
│   │   │       │   ├── RoomInfoController.java
│   │   │       │   ├── StatisticsController.java
│   │   │       │   ├── UserController.java
│   │   │       │   ├── UserLoginController.java
│   │   │       │   └── UserRoomController.java
│   │   │       ├── dao/                 # 数据访问层
│   │   │       │   ├── OrderDao.java
│   │   │       │   ├── RoomCategoryDao.java
│   │   │       │   ├── RoomInfoDao.java
│   │   │       │   └── UserDao.java
│   │   │       ├── entity/              # 实体类
│   │   │       │   ├── Order.java
│   │   │       │   ├── RoomCategory.java
│   │   │       │   ├── RoomInfo.java
│   │   │       │   └── User.java
│   │   │       └── service/             # 业务逻辑层
│   │   │           ├── impl/
│   │   │           ├── OrderService.java
│   │   │           ├── RoomCategoryService.java
│   │   │           ├── RoomInfoService.java
│   │   │           └── UserService.java
│   │   ├── resources/                   # 资源文件
│   │   │   ├── mapper/                  # MyBatis映射文件
│   │   │   │   ├── OrderDao.xml
│   │   │   │   ├── RoomCategoryDao.xml
│   │   │   │   ├── RoomInfoDao.xml
│   │   │   │   └── UserDao.xml
│   │   │   ├── applicationContext.xml   # Spring配置
│   │   │   ├── db.properties            # 数据库配置
│   │   │   ├── logback.xml              # 日志配置
│   │   │   ├── mybatis-config.xml       # MyBatis配置
│   │   │   └── spring-mvc.xml           # Spring MVC配置
│   │   └── webapp/                      # Web资源
│   │       ├── images/                  # 静态图片
│   │       │   └── login-bg.jpg
│   │       ├── static/                  # 静态资源
│   │       │   └── layui/               # Layui框架
│   │       ├── views/                   # JSP视图
│   │       │   ├── admin/               # 管理员页面
│   │       │   │   ├── order/
│   │       │   │   ├── room/
│   │       │   │   ├── statistics/
│   │       │   │   ├── system/
│   │       │   │   ├── user/
│   │       │   │   ├── index.jsp
│   │       │   │   ├── login.jsp
│   │       │   │   └── profile*.jsp
│   │       │   └── user/                # 用户页面
│   │       │       ├── book.jsp
│   │       │       ├── index.jsp
│   │       │       ├── login.jsp
│   │       │       ├── orders.jsp
│   │       │       ├── register.jsp
│   │       │       ├── room_detail.jsp
│   │       │       └── rooms.jsp
│   │       └── WEB-INF/
│   │           └── web.xml              # Web应用配置
│   └── test/                            # 测试代码
├── logs/                                # 日志文件
├── target/                              # 编译输出
├── pom.xml                              # Maven配置
├── README.md                            # 项目说明
└── 260112ssmhotel.sql                   # 数据库脚本
```

---

## 🎓 十、学习价值

### 10.1 适合人群
- Java Web 初学者
- SSM 框架学习者
- 毕业设计学生
- 酒店管理系统开发者

### 10.2 学习要点

#### 后端技术
- Spring IoC 和 AOP
- Spring MVC 请求处理流程
- MyBatis 数据持久化
- 拦截器的使用
- 文件上传处理
- RESTful API 设计

#### 前端技术
- Layui 框架使用
- Ajax 异步请求
- 表单验证
- 图片上传预览
- 选项卡管理
- 响应式布局

#### 数据库设计
- 表结构设计
- 外键关联
- 索引优化
- 事务处理

#### 项目实践
- 需求分析
- 系统设计
- 编码实现
- 测试部署
- 问题排查

---

## 📞 十一、技术支持

### 11.1 常用命令

#### Maven 命令
```bash
# 清理项目
mvn clean

# 编译项目
mvn compile

# 打包项目
mvn package

# 跳过测试打包
mvn package -DskipTests

# 运行项目（Tomcat插件）
mvn tomcat7:run
```

#### MySQL 命令
```bash
# 登录MySQL
mysql -u root -p

# 创建数据库
CREATE DATABASE ssmhotel;

# 导入数据
mysql -u root -p ssmhotel < 260112ssmhotel.sql

# 查看表
SHOW TABLES;

# 查看表结构
DESC user;
```

### 11.2 调试技巧
1. **查看日志**: `logs/hotel.log`
2. **浏览器控制台**: F12 查看网络请求和错误
3. **IDEA 断点调试**: 在关键代码处设置断点
4. **数据库查询**: 直接在数据库中验证数据
5. **Postman 测试**: 测试后端接口

### 11.3 参考资源
- Spring 官方文档: https://spring.io/projects/spring-framework
- MyBatis 官方文档: https://mybatis.org/mybatis-3/zh/index.html
- Layui 官方文档: https://layui.dev/
- Font Awesome 图标库: https://fontawesome.com/

---

## ✨ 总结

本酒店管理系统是一个功能完善、结构清晰的 Java Web 项目，采用经典的 SSM 框架开发，适合作为学习项目或毕业设计。系统实现了酒店管理的核心功能，包括房间管理、订单管理、用户管理、统计报表等模块，界面美观、操作便捷。

**核心功能**:
- ✅ 管理员后台：房间管理、订单管理、会员管理、统计报表
- ✅ 用户前台：房间浏览、在线预订、订单查询、个人中心
- ✅ 权限控制：管理员和用户分离，拦截器验证
- ✅ 文件上传：支持图片上传，外部存储
- ✅ 数据统计：入住率统计、收入统计，可视化展示

**技术特点**:
- 🎯 SSM 框架整合
- 🎨 Layui 前端框架
- 📊 数据可视化
- 🔐 权限控制
- 📁 文件上传
- 📝 日志记录

希望这个项目能帮助你学习 Java Web 开发，如有问题欢迎交流！

---

**文档版本**: v1.0  
**最后更新**: 2026-01-17  
**作者**: Hotel Management System Team
